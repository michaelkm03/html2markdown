<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE ac:confluence SYSTEM "../confluence-to-markdown-converter/dtd/confluence-all.dtd" [<!ENTITY clubs    "&#9827;"><!ENTITY nbsp   "&#160;"><!ENTITY ndash   "&#8211;"><!ENTITY mdash   "&#8212;">]><ac:confluence xmlns:ac="http://www.atlassian.com/schema/confluence/4/ac/" xmlns:ri="http://www.atlassian.com/schema/confluence/4/ri/" xmlns="http://www.atlassian.com/schema/confluence/4/"><ac:layout><ac:layout-section ac:type="single"><ac:layout-cell><p>While we have automated many of the previously manually datapulls, the Crashlytics data source is one that may require a return to manual updating. The following is the previously used methodology and will remain here if such a process needs to be undertaken once again&nbsp;</p></ac:layout-cell></ac:layout-section><ac:layout-section ac:type="two_right_sidebar"><ac:layout-cell><h2><span style="line-height: 1.42857;">&quot;Crash Data&quot; data source</span></h2><p><span style="line-height: 1.42857;">To update the <a href="https://drive.google.com/a/getvictorious.com/file/d/0B1N-_25FQNl0NkVObGpRTTRhZUU/view?usp=sharing">&quot;Crash Data&quot;</a> data source, you have to determine the top 5 apps for the week by WAU. The queries to the right will run off the redshift database on both overall WAU as well as spliting it out by os.</span><em style="line-height: 1.42857;"> If you are pulling this data on a Monday, it is important you either pull the data on the cluster or the that data source includes up to the Sunday at 11:59 PM.&nbsp;</em></p><p>Once the data has populated, add the top 5 overall apps by WAU and their respective os WAU into the data excel file:&nbsp;</p><p><ac:image ac:height="150"><ri:attachment ri:filename="Screen Shot 2016-03-04 at 11.47.57 AM.png" /></ac:image></p><p><ac:image ac:height="150"><ri:attachment ri:filename="Screen Shot 2016-03-04 at 11.50.55 AM.png" /></ac:image></p><p>Then, you will need to open up Fabric (<a href="https://fabric.io/dashboard">https://fabric.io/dashboard</a>) and select an app and os that is listed in the top 5 apps you just pulled.</p><p>&nbsp;<ac:image ac:height="250"><ri:attachment ri:filename="Screen Shot 2016-03-04 at 11.39.43 AM.png" /></ac:image></p><p>Once you have selected one of the apps, make sure you change the date range to reflect the week you are interested in highlighted in the red box in the picture below. Once you have the date range set, take the crashes and users affected into the excel file for the relevant app and os. Make sure you do this for every app and os. You should have to pull 10 sets of data from Fabric, two for each of the top 5 apps for the week.&nbsp;</p><p><ac:image><ri:attachment ri:filename="Screen Shot 2016-03-04 at 11.56.17 AM.png" /></ac:image></p><p>Once you are done, save, close, and upload the revised version in the Google Drive folder.&nbsp;</p></ac:layout-cell><ac:layout-cell><p style="margin-left: 6.0px;"><span style="color: rgb(0,0,0);">WAU Queries: </span></p><pre>--Lists WAU in descending order by App overall and by OS. The date filter in bold needs to be changed to the date of the Sunday before the week in question.</pre><p>&nbsp;</p><p>SELECT app</p><p>, week_ending</p><p>, SUM(WAU) as WAU</p><p>, SUM(CASE WHEN os='Android' THEN WAU ELSE 0 END) as Android_WAU</p><p>, SUM(CASE WHEN os='iOS' THEN WAU ELSE 0 END) as iOS_WAU</p><p>FROM</p><p style="margin-left: 30.0px;">(</p><p style="margin-left: 30.0px;">SELECT dau.app</p><p style="margin-left: 30.0px;">, dau.os</p><p style="margin-left: 30.0px;">, date_trunc('week', dau.local_datetime)+6 as week_ending</p><p style="margin-left: 30.0px;">, count(distinct dau.user_map_tag) as WAU</p><p style="margin-left: 30.0px;">FROM vic_dau dau</p><p style="margin-left: 30.0px;">WHERE dau.local_datetime::date&gt;'2016-04-24'</p><p style="margin-left: 30.0px;">GROUP BY 1,2,3</p><p style="margin-left: 30.0px;">)</p><p>GROUP BY 1,2</p><p>ORDER BY 3 desc</p></ac:layout-cell></ac:layout-section></ac:layout></ac:confluence>